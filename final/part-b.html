<!DOCTYPE html>
<html>
  <head>
      <title>Part-B</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
      <!-- jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <style>
      
      #map {height: 400px;}
  </style>
  
  </head>
  <body>
      <body>
        <div id="Search">
            <h1>Choose Hospital</h1>
            <select id="type">
                <option value = "'WIC Clinic'"> WIC Clinic </option>
                
                <option value = "'Mental Health Clinic'"> Mental Health Clinic </option>
                
                <option value = "'STI Specialty Clinic'"> STI Specialty Clinic </option>
            </select>
            <br>
            <br>
            <button id="btn" class="btn btn-primary">Search</button>
        </div>
        
      <div id="list">
      <div class="list-group" id="template">
      <a href="#" class="list-group-item list-group-item-action flex-column align-items-start active">
    <div class="d-flex w-100 justify-content-between">
      <h5 class="mb-1">List group item heading</h5>
      <small>3 days ago</small>
    </div>
    <p class="mb-2">Donec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus varius blandit.</p>
    <small>Donec id elit non mi porta.</small>
  </a>
  
  
</div>
</div>

<div id="map"></div>
   
  <script>
    var url="https://data.cityofchicago.org/resource/t57k-za2y.json?clinic_type=<clinicType>"
    function initMap(){
        $("#btn").on("click",function(){
            $.get(url.replace("<clinicType>",$("#type").val())
            )
            .done(function(response){
                console.log(response)
                var myCenter={lat:41.878,lng:-87.6298};
                var map=new google.maps.Map(document.getElementById('map'),{
                    zoom:12,
                    center:myCenter
                    });
            
           
            
            $.each(response, function(i,v) {
              var clone = $("template").clone();
              clone.attr("id", v.id);
              clone.find(".mb-1").text(v.site_name);
              
              clone.find(".mb-2").html("Clinic Address: " + v.street_address + "<br>" + "City,State Zip: " + v.city+", "+v.state+" "+v.zip + "<br>" + "Clinic Phone: " +v.phone_1);
             
              $("#list").append(clone);
            
        var contentString = '<div id = "content" style = "color:Black;">'+
                                                '<div id = "siteNotice">'+
                                                '</div>'+
                                                '<h2 id = "firstHeading" class = "firstHeading">' + name + '</h2>' +
                                                '<h3 id = " secondHeading" class = "secondHeading">' + address+ '</h3>' +
                                                '<div id="bodyContent">' +
                                                '<br>'+cityStateZip +'<br>' +
                                                '<br>' + "Phone: " + phone + '<br>'+"Hours of Operation: "+hours+'<br>'
                                                '</div>';
                                                '</div>';
                            var infoWindow=new google.maps.InfoWindow({
                                content: contentString
                            });
                var markers=new google.maps.Marker({
                    position:{lat:parseFloat(response[i].latitude),lng:parseFloat(response[i].longitude)},
                    map:map
                })
                markers.addListener('click',function(){
                    infoWindow.open(map,markers);
                     });
                })    
            })
        })
    }

     
      
   </script>
      
      
      </body>
      
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAE_eYDF0ePJ1hi3v6SnlcIkyf0S5RfX5Q&callback=initMap"
  type="text/javascript"></script>
      
</html>