<!DOCTYPE html>
<html>
  <head>
      <title>Part-B</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
      <!-- jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <style>
      
      #map {height: 400px;}
  </style>
  
  </head>
  <body>
     <div class="container">
		<div class="input-group mb-3">
		  <div class="input-group-prepend">
		    <label class="input-group-text" for="inputGroupSelect01">Options</label>
		  </div>
		  <select class="custom-select" id="myselect">
		    <option selected disabled>Choose ...</option>
		    <option value="1">WIC Clinic</option>
		    <option value="2">Mental Health Clinic</option>
		    <option value="3">STI Specialty Clinic</option>
		  </select>
		</div>
		<button id="searchBtn">Search</button>

<div id="map" class = hide></div>
   
  <script>
    var url="https://data.cityofchicago.org/resource/t57k-za2y.json?clinic_type=<clinicType>"
    function initMap(){
        $("#btn").on("click",function(){
            $.get(url.replace("<clinicType>",$("#type").val())
            )
            .done(function(response){
                console.log(response)
                var myCenter={lat:41.878,lng:-87.6298};
                var map=new google.maps.Map(document.getElementById('map'),{
                    zoom:12,
                    center:myCenter
                    });
            
           
            
            $.each(response, function(i,v) {
              var clone = $("template").clone();
              clone.attr("id", v.id);
              clone.find(".mb-1").text(v.site_name);
              
              clone.find(".mb-2").html("Clinic Address: " + v.street_address + "<br>" + "City,State Zip: " + v.city+", "+v.state+" "+v.zip + "<br>" + "Clinic Phone: " +v.phone_1);
             
              $("#list").append(clone);
            
        var contentString = '<div id = "content" style = "color:Black;">'+
                                                '<div id = "siteNotice">'+
                                                '</div>'+
                                                '<h2 id = "firstHeading" class = "firstHeading">' + v.name + '</h2>' +
                                                '<h3 id = " secondHeading" class = "secondHeading">' +v.address+ '</h3>' +
                                                '<div id="bodyContent">' +
                                                '<br>'+v.city +'<br>'+<br>'
                                                '<br>' + "Phone: " + phone + '<br>'+"Hours of Operation: "+hours+'<br>'
                                                '</div>';
                                                '</div>';
                            var infoWindow=new google.maps.InfoWindow({
                                content: contentString
                            });
                var markers=new google.maps.Marker({
                    position:{lat:parseFloat(response[i].latitude),lng:parseFloat(response[i].longitude)},
                    map:map
                })
                markers.addListener('click',function(){
                    infoWindow.open(map,markers);
                     });
                })    
            })
        })
    }

     
      
   </script>
      
      
      </body>
      
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAE_eYDF0ePJ1hi3v6SnlcIkyf0S5RfX5Q&callback=initMap"
  type="text/javascript"></script>
      
</html>